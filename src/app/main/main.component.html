<div class="container">
  <mat-drawer-container>

    <mat-drawer-content>
      <form class="example-form" #mode value="side">
        <mat-form-field class="example-full-width">
          <mat-label>Город</mat-label>
          <input type="text"
          placeholder="Pick one"
          aria-label="Town/Settlement"
          matInput
          [matAutocomplete]="auto">
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let value of mainService.city; index as i"
            [value]="value.city_ascii"
            (click)="toggle(value)">
              <div (click)="drawer.toggle()">
                {{value.city_ascii}}
              </div>
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>


        <button (click)=toggleMap()></button>
        <div [ngSwitch]="mat">

            <div class="map" [class.map1]="mat">
              <ya-map [center]="[mainService.city[count].lat, mainService.city[count].lng]"  >
                <ya-clusterer [options]="clustererOptions">
                  <ng-container *ngFor="let point of mainService.city[count].point">
                    <ng-container *ngFor="let sel of selectorArr">
                      <ya-placemark *ngIf="point.id == sel" [geometry]="[point.lat, point.lng]"></ya-placemark>
                    </ng-container>
                  </ng-container>
                </ya-clusterer>
              </ya-map>
            </div>

            <div class="map" [class.map1]="mat1">
              <ya-map [center]="[mainService.city[count].lat, mainService.city[count].lng]" [zoom]="8">
                <ya-placemark [geometry]="[mainService.city[count].lat, mainService.city[count].lng]">
                </ya-placemark>
              </ya-map>
            </div>

      </div>
    </form>
  </mat-drawer-content>

    <mat-drawer #drawer [mode]="mode.value" >
          <div [ngSwitch]="count">
            <ng-template ngSwitchCase="1">
              <mat-card class="example-card" *ngFor="let point of mainService.city[1].point;">
                <mat-card-header>
                  <mat-card-title>{{point.name}}</mat-card-title>
                  <mat-card-subtitle>{{point.name}}</mat-card-subtitle>
                </mat-card-header>
                <img mat-card-image src="{{point.url}}" alt="">
                <mat-card-content>
                  <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                    Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                  </p>
                </mat-card-content>
                <mat-card-actions>
                  <button (click)="selectCardPoint(point.id)">select</button>
                </mat-card-actions>
              </mat-card>
            </ng-template>
            <ng-template ngSwitchDefault>
              <mat-card class="example-card" *ngFor="let point of mainService.city[0].point;">
                <mat-card-header>
                  <mat-card-title>{{point.name}}</mat-card-title>
                  <mat-card-subtitle>{{point.name}}</mat-card-subtitle>
                </mat-card-header>
                <img mat-card-image src="{{point.url}}" alt="">
                <mat-card-content>
                  <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                    Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                  </p>
                </mat-card-content>
                <button (click)="selectCardPoint(point.id)">select</button>
              </mat-card>
            </ng-template>
          </div>

          <button  (click)=toggleMap()></button>
    </mat-drawer>

  </mat-drawer-container>
</div>
